{"version":3,"file":"829-315d8bf383d5dcf2e1b3.min.js","mappings":"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","sources":["webpack://Maintanence Tracker/./node_modules/draft-js/lib/insertFragmentIntoContentState.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/insertIntoList.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/insertTextIntoContentState.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isElement.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isEventHandled.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isHTMLAnchorElement.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isHTMLBRElement.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isHTMLElement.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isHTMLImageElement.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isInstanceOfNode.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isSelectionAtLeafStart.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/isSoftNewlineEvent.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandBackspaceToStartOfLine.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandBackspaceWord.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandDeleteWord.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandInsertNewline.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandMoveSelectionToEndOfBlock.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandMoveSelectionToStartOfBlock.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandPlainBackspace.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandPlainDelete.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandTransposeCharacters.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/keyCommandUndo.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/modifyBlockForContentState.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/moveBlockInContentState.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/moveSelectionBackward.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/moveSelectionForward.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/randomizeBlockMapKeys.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/removeEntitiesAtEdges.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/removeRangeFromContentState.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/removeTextWithStrategy.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/sanitizeDraftText.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/setDraftEditorSelection.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/splitBlockInContentState.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/splitTextIntoTextBlocks.js","webpack://Maintanence Tracker/./node_modules/draft-js/lib/uuid.js"],"sourcesContent":["/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar BlockMapBuilder = require(\"./BlockMapBuilder\");\n\nvar ContentBlockNode = require(\"./ContentBlockNode\");\n\nvar Immutable = require(\"immutable\");\n\nvar insertIntoList = require(\"./insertIntoList\");\n\nvar invariant = require(\"fbjs/lib/invariant\");\n\nvar randomizeBlockMapKeys = require(\"./randomizeBlockMapKeys\");\n\nvar List = Immutable.List;\n\nvar updateExistingBlock = function updateExistingBlock(contentState, selectionState, blockMap, fragmentBlock, targetKey, targetOffset) {\n  var mergeBlockData = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 'REPLACE_WITH_NEW_DATA';\n  var targetBlock = blockMap.get(targetKey);\n  var text = targetBlock.getText();\n  var chars = targetBlock.getCharacterList();\n  var finalKey = targetKey;\n  var finalOffset = targetOffset + fragmentBlock.getText().length;\n  var data = null;\n\n  switch (mergeBlockData) {\n    case 'MERGE_OLD_DATA_TO_NEW_DATA':\n      data = fragmentBlock.getData().merge(targetBlock.getData());\n      break;\n\n    case 'REPLACE_WITH_NEW_DATA':\n      data = fragmentBlock.getData();\n      break;\n  }\n\n  var type = targetBlock.getType();\n\n  if (text && type === 'unstyled') {\n    type = fragmentBlock.getType();\n  }\n\n  var newBlock = targetBlock.merge({\n    text: text.slice(0, targetOffset) + fragmentBlock.getText() + text.slice(targetOffset),\n    characterList: insertIntoList(chars, fragmentBlock.getCharacterList(), targetOffset),\n    type: type,\n    data: data\n  });\n  return contentState.merge({\n    blockMap: blockMap.set(targetKey, newBlock),\n    selectionBefore: selectionState,\n    selectionAfter: selectionState.merge({\n      anchorKey: finalKey,\n      anchorOffset: finalOffset,\n      focusKey: finalKey,\n      focusOffset: finalOffset,\n      isBackward: false\n    })\n  });\n};\n/**\n * Appends text/characterList from the fragment first block to\n * target block.\n */\n\n\nvar updateHead = function updateHead(block, targetOffset, fragment) {\n  var text = block.getText();\n  var chars = block.getCharacterList(); // Modify head portion of block.\n\n  var headText = text.slice(0, targetOffset);\n  var headCharacters = chars.slice(0, targetOffset);\n  var appendToHead = fragment.first();\n  return block.merge({\n    text: headText + appendToHead.getText(),\n    characterList: headCharacters.concat(appendToHead.getCharacterList()),\n    type: headText ? block.getType() : appendToHead.getType(),\n    data: appendToHead.getData()\n  });\n};\n/**\n * Appends offset text/characterList from the target block to the last\n * fragment block.\n */\n\n\nvar updateTail = function updateTail(block, targetOffset, fragment) {\n  // Modify tail portion of block.\n  var text = block.getText();\n  var chars = block.getCharacterList(); // Modify head portion of block.\n\n  var blockSize = text.length;\n  var tailText = text.slice(targetOffset, blockSize);\n  var tailCharacters = chars.slice(targetOffset, blockSize);\n  var prependToTail = fragment.last();\n  return prependToTail.merge({\n    text: prependToTail.getText() + tailText,\n    characterList: prependToTail.getCharacterList().concat(tailCharacters),\n    data: prependToTail.getData()\n  });\n};\n\nvar getRootBlocks = function getRootBlocks(block, blockMap) {\n  var headKey = block.getKey();\n  var rootBlock = block;\n  var rootBlocks = []; // sometimes the fragment head block will not be part of the blockMap itself this can happen when\n  // the fragment head is used to update the target block, however when this does not happen we need\n  // to make sure that we include it on the rootBlocks since the first block of a fragment is always a\n  // fragment root block\n\n  if (blockMap.get(headKey)) {\n    rootBlocks.push(headKey);\n  }\n\n  while (rootBlock && rootBlock.getNextSiblingKey()) {\n    var lastSiblingKey = rootBlock.getNextSiblingKey();\n\n    if (!lastSiblingKey) {\n      break;\n    }\n\n    rootBlocks.push(lastSiblingKey);\n    rootBlock = blockMap.get(lastSiblingKey);\n  }\n\n  return rootBlocks;\n};\n\nvar updateBlockMapLinks = function updateBlockMapLinks(blockMap, originalBlockMap, targetBlock, fragmentHeadBlock) {\n  return blockMap.withMutations(function (blockMapState) {\n    var targetKey = targetBlock.getKey();\n    var headKey = fragmentHeadBlock.getKey();\n    var targetNextKey = targetBlock.getNextSiblingKey();\n    var targetParentKey = targetBlock.getParentKey();\n    var fragmentRootBlocks = getRootBlocks(fragmentHeadBlock, blockMap);\n    var lastRootFragmentBlockKey = fragmentRootBlocks[fragmentRootBlocks.length - 1];\n\n    if (blockMapState.get(headKey)) {\n      // update the fragment head when it is part of the blockMap otherwise\n      blockMapState.setIn([targetKey, 'nextSibling'], headKey);\n      blockMapState.setIn([headKey, 'prevSibling'], targetKey);\n    } else {\n      // update the target block that had the fragment head contents merged into it\n      blockMapState.setIn([targetKey, 'nextSibling'], fragmentHeadBlock.getNextSiblingKey());\n      blockMapState.setIn([fragmentHeadBlock.getNextSiblingKey(), 'prevSibling'], targetKey);\n    } // update the last root block fragment\n\n\n    blockMapState.setIn([lastRootFragmentBlockKey, 'nextSibling'], targetNextKey); // update the original target next block\n\n    if (targetNextKey) {\n      blockMapState.setIn([targetNextKey, 'prevSibling'], lastRootFragmentBlockKey);\n    } // update fragment parent links\n\n\n    fragmentRootBlocks.forEach(function (blockKey) {\n      return blockMapState.setIn([blockKey, 'parent'], targetParentKey);\n    }); // update targetBlock parent child links\n\n    if (targetParentKey) {\n      var targetParent = blockMap.get(targetParentKey);\n      var originalTargetParentChildKeys = targetParent.getChildKeys();\n      var targetBlockIndex = originalTargetParentChildKeys.indexOf(targetKey);\n      var insertionIndex = targetBlockIndex + 1;\n      var newChildrenKeysArray = originalTargetParentChildKeys.toArray(); // insert fragment children\n\n      newChildrenKeysArray.splice.apply(newChildrenKeysArray, [insertionIndex, 0].concat(fragmentRootBlocks));\n      blockMapState.setIn([targetParentKey, 'children'], List(newChildrenKeysArray));\n    }\n  });\n};\n\nvar insertFragment = function insertFragment(contentState, selectionState, blockMap, fragment, targetKey, targetOffset) {\n  var isTreeBasedBlockMap = blockMap.first() instanceof ContentBlockNode;\n  var newBlockArr = [];\n  var fragmentSize = fragment.size;\n  var target = blockMap.get(targetKey);\n  var head = fragment.first();\n  var tail = fragment.last();\n  var finalOffset = tail.getLength();\n  var finalKey = tail.getKey();\n  var shouldNotUpdateFromFragmentBlock = isTreeBasedBlockMap && (!target.getChildKeys().isEmpty() || !head.getChildKeys().isEmpty());\n  blockMap.forEach(function (block, blockKey) {\n    if (blockKey !== targetKey) {\n      newBlockArr.push(block);\n      return;\n    }\n\n    if (shouldNotUpdateFromFragmentBlock) {\n      newBlockArr.push(block);\n    } else {\n      newBlockArr.push(updateHead(block, targetOffset, fragment));\n    } // Insert fragment blocks after the head and before the tail.\n\n\n    fragment // when we are updating the target block with the head fragment block we skip the first fragment\n    // head since its contents have already been merged with the target block otherwise we include\n    // the whole fragment\n    .slice(shouldNotUpdateFromFragmentBlock ? 0 : 1, fragmentSize - 1).forEach(function (fragmentBlock) {\n      return newBlockArr.push(fragmentBlock);\n    }); // update tail\n\n    newBlockArr.push(updateTail(block, targetOffset, fragment));\n  });\n  var updatedBlockMap = BlockMapBuilder.createFromArray(newBlockArr);\n\n  if (isTreeBasedBlockMap) {\n    updatedBlockMap = updateBlockMapLinks(updatedBlockMap, blockMap, target, head);\n  }\n\n  return contentState.merge({\n    blockMap: updatedBlockMap,\n    selectionBefore: selectionState,\n    selectionAfter: selectionState.merge({\n      anchorKey: finalKey,\n      anchorOffset: finalOffset,\n      focusKey: finalKey,\n      focusOffset: finalOffset,\n      isBackward: false\n    })\n  });\n};\n\nvar insertFragmentIntoContentState = function insertFragmentIntoContentState(contentState, selectionState, fragmentBlockMap) {\n  var mergeBlockData = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'REPLACE_WITH_NEW_DATA';\n  !selectionState.isCollapsed() ? process.env.NODE_ENV !== \"production\" ? invariant(false, '`insertFragment` should only be called with a collapsed selection state.') : invariant(false) : void 0;\n  var blockMap = contentState.getBlockMap();\n  var fragment = randomizeBlockMapKeys(fragmentBlockMap);\n  var targetKey = selectionState.getStartKey();\n  var targetOffset = selectionState.getStartOffset();\n  var targetBlock = blockMap.get(targetKey);\n\n  if (targetBlock instanceof ContentBlockNode) {\n    !targetBlock.getChildKeys().isEmpty() ? process.env.NODE_ENV !== \"production\" ? invariant(false, '`insertFragment` should not be called when a container node is selected.') : invariant(false) : void 0;\n  } // When we insert a fragment with a single block we simply update the target block\n  // with the contents of the inserted fragment block\n\n\n  if (fragment.size === 1) {\n    return updateExistingBlock(contentState, selectionState, blockMap, fragment.first(), targetKey, targetOffset, mergeBlockData);\n  }\n\n  return insertFragment(contentState, selectionState, blockMap, fragment, targetKey, targetOffset);\n};\n\nmodule.exports = insertFragmentIntoContentState;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\n/**\n * Maintain persistence for target list when appending and prepending.\n */\nfunction insertIntoList(targetListArg, toInsert, offset) {\n  var targetList = targetListArg;\n\n  if (offset === targetList.count()) {\n    toInsert.forEach(function (c) {\n      targetList = targetList.push(c);\n    });\n  } else if (offset === 0) {\n    toInsert.reverse().forEach(function (c) {\n      targetList = targetList.unshift(c);\n    });\n  } else {\n    var head = targetList.slice(0, offset);\n    var tail = targetList.slice(offset);\n    targetList = head.concat(toInsert, tail).toList();\n  }\n\n  return targetList;\n}\n\nmodule.exports = insertIntoList;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar Immutable = require(\"immutable\");\n\nvar insertIntoList = require(\"./insertIntoList\");\n\nvar invariant = require(\"fbjs/lib/invariant\");\n\nvar Repeat = Immutable.Repeat;\n\nfunction insertTextIntoContentState(contentState, selectionState, text, characterMetadata) {\n  !selectionState.isCollapsed() ? process.env.NODE_ENV !== \"production\" ? invariant(false, '`insertText` should only be called with a collapsed range.') : invariant(false) : void 0;\n  var len = null;\n\n  if (text != null) {\n    len = text.length;\n  }\n\n  if (len == null || len === 0) {\n    return contentState;\n  }\n\n  var blockMap = contentState.getBlockMap();\n  var key = selectionState.getStartKey();\n  var offset = selectionState.getStartOffset();\n  var block = blockMap.get(key);\n  var blockText = block.getText();\n  var newBlock = block.merge({\n    text: blockText.slice(0, offset) + text + blockText.slice(offset, block.getLength()),\n    characterList: insertIntoList(block.getCharacterList(), Repeat(characterMetadata, len).toList(), offset)\n  });\n  var newOffset = offset + len;\n  return contentState.merge({\n    blockMap: blockMap.set(key, newBlock),\n    selectionAfter: selectionState.merge({\n      anchorOffset: newOffset,\n      focusOffset: newOffset\n    })\n  });\n}\n\nmodule.exports = insertTextIntoContentState;","\"use strict\";\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\nfunction isElement(node) {\n  if (!node || !node.ownerDocument) {\n    return false;\n  }\n\n  return node.nodeType === Node.ELEMENT_NODE;\n}\n\nmodule.exports = isElement;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\n/**\n * Utility method for determining whether or not the value returned\n * from a handler indicates that it was handled.\n */\nfunction isEventHandled(value) {\n  return value === 'handled' || value === true;\n}\n\nmodule.exports = isEventHandled;","\"use strict\";\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\nvar isElement = require(\"./isElement\");\n\nfunction isHTMLAnchorElement(node) {\n  if (!node || !node.ownerDocument) {\n    return false;\n  }\n\n  return isElement(node) && node.nodeName === 'A';\n}\n\nmodule.exports = isHTMLAnchorElement;","\"use strict\";\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\nvar isElement = require(\"./isElement\");\n\nfunction isHTMLBRElement(node) {\n  if (!node || !node.ownerDocument) {\n    return false;\n  }\n\n  return isElement(node) && node.nodeName === 'BR';\n}\n\nmodule.exports = isHTMLBRElement;","\"use strict\";\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\nfunction isHTMLElement(node) {\n  if (!node || !node.ownerDocument) {\n    return false;\n  }\n\n  if (!node.ownerDocument.defaultView) {\n    return node instanceof HTMLElement;\n  }\n\n  if (node instanceof node.ownerDocument.defaultView.HTMLElement) {\n    return true;\n  }\n\n  return false;\n}\n\nmodule.exports = isHTMLElement;","\"use strict\";\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\nvar isElement = require(\"./isElement\");\n\nfunction isHTMLImageElement(node) {\n  if (!node || !node.ownerDocument) {\n    return false;\n  }\n\n  return isElement(node) && node.nodeName === 'IMG';\n}\n\nmodule.exports = isHTMLImageElement;","\"use strict\";\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\nfunction isInstanceOfNode(target) {\n  // we changed the name because of having duplicate module provider (fbjs)\n  if (!target || !('ownerDocument' in target)) {\n    return false;\n  }\n\n  if ('ownerDocument' in target) {\n    var node = target;\n\n    if (!node.ownerDocument.defaultView) {\n      return node instanceof Node;\n    }\n\n    if (node instanceof node.ownerDocument.defaultView.Node) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nmodule.exports = isInstanceOfNode;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nfunction isSelectionAtLeafStart(editorState) {\n  var selection = editorState.getSelection();\n  var anchorKey = selection.getAnchorKey();\n  var blockTree = editorState.getBlockTree(anchorKey);\n  var offset = selection.getStartOffset();\n  var isAtStart = false;\n  blockTree.some(function (leafSet) {\n    if (offset === leafSet.get('start')) {\n      isAtStart = true;\n      return true;\n    }\n\n    if (offset < leafSet.get('end')) {\n      return leafSet.get('leaves').some(function (leaf) {\n        var leafStart = leaf.get('start');\n\n        if (offset === leafStart) {\n          isAtStart = true;\n          return true;\n        }\n\n        return false;\n      });\n    }\n\n    return false;\n  });\n  return isAtStart;\n}\n\nmodule.exports = isSelectionAtLeafStart;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar Keys = require(\"fbjs/lib/Keys\");\n\nfunction isSoftNewlineEvent(e) {\n  return e.which === Keys.RETURN && (e.getModifierState('Shift') || e.getModifierState('Alt') || e.getModifierState('Control'));\n}\n\nmodule.exports = isSoftNewlineEvent;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar EditorState = require(\"./EditorState\");\n\nvar expandRangeToStartOfLine = require(\"./expandRangeToStartOfLine\");\n\nvar getDraftEditorSelectionWithNodes = require(\"./getDraftEditorSelectionWithNodes\");\n\nvar moveSelectionBackward = require(\"./moveSelectionBackward\");\n\nvar removeTextWithStrategy = require(\"./removeTextWithStrategy\");\n\nfunction keyCommandBackspaceToStartOfLine(editorState, e) {\n  var afterRemoval = removeTextWithStrategy(editorState, function (strategyState) {\n    var selection = strategyState.getSelection();\n\n    if (selection.isCollapsed() && selection.getAnchorOffset() === 0) {\n      return moveSelectionBackward(strategyState, 1);\n    }\n\n    var ownerDocument = e.currentTarget.ownerDocument;\n    var domSelection = ownerDocument.defaultView.getSelection(); // getRangeAt can technically throw if there's no selection, but we know\n    // there is one here because text editor has focus (the cursor is a\n    // selection of length 0). Therefore, we don't need to wrap this in a\n    // try-catch block.\n\n    var range = domSelection.getRangeAt(0);\n    range = expandRangeToStartOfLine(range);\n    return getDraftEditorSelectionWithNodes(strategyState, null, range.endContainer, range.endOffset, range.startContainer, range.startOffset).selectionState;\n  }, 'backward');\n\n  if (afterRemoval === editorState.getCurrentContent()) {\n    return editorState;\n  }\n\n  return EditorState.push(editorState, afterRemoval, 'remove-range');\n}\n\nmodule.exports = keyCommandBackspaceToStartOfLine;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftRemovableWord = require(\"./DraftRemovableWord\");\n\nvar EditorState = require(\"./EditorState\");\n\nvar moveSelectionBackward = require(\"./moveSelectionBackward\");\n\nvar removeTextWithStrategy = require(\"./removeTextWithStrategy\");\n/**\n * Delete the word that is left of the cursor, as well as any spaces or\n * punctuation after the word.\n */\n\n\nfunction keyCommandBackspaceWord(editorState) {\n  var afterRemoval = removeTextWithStrategy(editorState, function (strategyState) {\n    var selection = strategyState.getSelection();\n    var offset = selection.getStartOffset(); // If there are no words before the cursor, remove the preceding newline.\n\n    if (offset === 0) {\n      return moveSelectionBackward(strategyState, 1);\n    }\n\n    var key = selection.getStartKey();\n    var content = strategyState.getCurrentContent();\n    var text = content.getBlockForKey(key).getText().slice(0, offset);\n    var toRemove = DraftRemovableWord.getBackward(text);\n    return moveSelectionBackward(strategyState, toRemove.length || 1);\n  }, 'backward');\n\n  if (afterRemoval === editorState.getCurrentContent()) {\n    return editorState;\n  }\n\n  return EditorState.push(editorState, afterRemoval, 'remove-range');\n}\n\nmodule.exports = keyCommandBackspaceWord;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftRemovableWord = require(\"./DraftRemovableWord\");\n\nvar EditorState = require(\"./EditorState\");\n\nvar moveSelectionForward = require(\"./moveSelectionForward\");\n\nvar removeTextWithStrategy = require(\"./removeTextWithStrategy\");\n/**\n * Delete the word that is right of the cursor, as well as any spaces or\n * punctuation before the word.\n */\n\n\nfunction keyCommandDeleteWord(editorState) {\n  var afterRemoval = removeTextWithStrategy(editorState, function (strategyState) {\n    var selection = strategyState.getSelection();\n    var offset = selection.getStartOffset();\n    var key = selection.getStartKey();\n    var content = strategyState.getCurrentContent();\n    var text = content.getBlockForKey(key).getText().slice(offset);\n    var toRemove = DraftRemovableWord.getForward(text); // If there are no words in front of the cursor, remove the newline.\n\n    return moveSelectionForward(strategyState, toRemove.length || 1);\n  }, 'forward');\n\n  if (afterRemoval === editorState.getCurrentContent()) {\n    return editorState;\n  }\n\n  return EditorState.push(editorState, afterRemoval, 'remove-range');\n}\n\nmodule.exports = keyCommandDeleteWord;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftModifier = require(\"./DraftModifier\");\n\nvar EditorState = require(\"./EditorState\");\n\nfunction keyCommandInsertNewline(editorState) {\n  var contentState = DraftModifier.splitBlock(editorState.getCurrentContent(), editorState.getSelection());\n  return EditorState.push(editorState, contentState, 'split-block');\n}\n\nmodule.exports = keyCommandInsertNewline;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar EditorState = require(\"./EditorState\");\n/**\n * See comment for `moveSelectionToStartOfBlock`.\n */\n\n\nfunction keyCommandMoveSelectionToEndOfBlock(editorState) {\n  var selection = editorState.getSelection();\n  var endKey = selection.getEndKey();\n  var content = editorState.getCurrentContent();\n  var textLength = content.getBlockForKey(endKey).getLength();\n  return EditorState.set(editorState, {\n    selection: selection.merge({\n      anchorKey: endKey,\n      anchorOffset: textLength,\n      focusKey: endKey,\n      focusOffset: textLength,\n      isBackward: false\n    }),\n    forceSelection: true\n  });\n}\n\nmodule.exports = keyCommandMoveSelectionToEndOfBlock;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar EditorState = require(\"./EditorState\");\n/**\n * Collapse selection at the start of the first selected block. This is used\n * for Firefox versions that attempt to navigate forward/backward instead of\n * moving the cursor. Other browsers are able to move the cursor natively.\n */\n\n\nfunction keyCommandMoveSelectionToStartOfBlock(editorState) {\n  var selection = editorState.getSelection();\n  var startKey = selection.getStartKey();\n  return EditorState.set(editorState, {\n    selection: selection.merge({\n      anchorKey: startKey,\n      anchorOffset: 0,\n      focusKey: startKey,\n      focusOffset: 0,\n      isBackward: false\n    }),\n    forceSelection: true\n  });\n}\n\nmodule.exports = keyCommandMoveSelectionToStartOfBlock;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar EditorState = require(\"./EditorState\");\n\nvar UnicodeUtils = require(\"fbjs/lib/UnicodeUtils\");\n\nvar moveSelectionBackward = require(\"./moveSelectionBackward\");\n\nvar removeTextWithStrategy = require(\"./removeTextWithStrategy\");\n/**\n * Remove the selected range. If the cursor is collapsed, remove the preceding\n * character. This operation is Unicode-aware, so removing a single character\n * will remove a surrogate pair properly as well.\n */\n\n\nfunction keyCommandPlainBackspace(editorState) {\n  var afterRemoval = removeTextWithStrategy(editorState, function (strategyState) {\n    var selection = strategyState.getSelection();\n    var content = strategyState.getCurrentContent();\n    var key = selection.getAnchorKey();\n    var offset = selection.getAnchorOffset();\n    var charBehind = content.getBlockForKey(key).getText()[offset - 1];\n    return moveSelectionBackward(strategyState, charBehind ? UnicodeUtils.getUTF16Length(charBehind, 0) : 1);\n  }, 'backward');\n\n  if (afterRemoval === editorState.getCurrentContent()) {\n    return editorState;\n  }\n\n  var selection = editorState.getSelection();\n  return EditorState.push(editorState, afterRemoval.set('selectionBefore', selection), selection.isCollapsed() ? 'backspace-character' : 'remove-range');\n}\n\nmodule.exports = keyCommandPlainBackspace;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar EditorState = require(\"./EditorState\");\n\nvar UnicodeUtils = require(\"fbjs/lib/UnicodeUtils\");\n\nvar moveSelectionForward = require(\"./moveSelectionForward\");\n\nvar removeTextWithStrategy = require(\"./removeTextWithStrategy\");\n/**\n * Remove the selected range. If the cursor is collapsed, remove the following\n * character. This operation is Unicode-aware, so removing a single character\n * will remove a surrogate pair properly as well.\n */\n\n\nfunction keyCommandPlainDelete(editorState) {\n  var afterRemoval = removeTextWithStrategy(editorState, function (strategyState) {\n    var selection = strategyState.getSelection();\n    var content = strategyState.getCurrentContent();\n    var key = selection.getAnchorKey();\n    var offset = selection.getAnchorOffset();\n    var charAhead = content.getBlockForKey(key).getText()[offset];\n    return moveSelectionForward(strategyState, charAhead ? UnicodeUtils.getUTF16Length(charAhead, 0) : 1);\n  }, 'forward');\n\n  if (afterRemoval === editorState.getCurrentContent()) {\n    return editorState;\n  }\n\n  var selection = editorState.getSelection();\n  return EditorState.push(editorState, afterRemoval.set('selectionBefore', selection), selection.isCollapsed() ? 'delete-character' : 'remove-range');\n}\n\nmodule.exports = keyCommandPlainDelete;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftModifier = require(\"./DraftModifier\");\n\nvar EditorState = require(\"./EditorState\");\n\nvar getContentStateFragment = require(\"./getContentStateFragment\");\n/**\n * Transpose the characters on either side of a collapsed cursor, or\n * if the cursor is at the end of the block, transpose the last two\n * characters.\n */\n\n\nfunction keyCommandTransposeCharacters(editorState) {\n  var selection = editorState.getSelection();\n\n  if (!selection.isCollapsed()) {\n    return editorState;\n  }\n\n  var offset = selection.getAnchorOffset();\n\n  if (offset === 0) {\n    return editorState;\n  }\n\n  var blockKey = selection.getAnchorKey();\n  var content = editorState.getCurrentContent();\n  var block = content.getBlockForKey(blockKey);\n  var length = block.getLength(); // Nothing to transpose if there aren't two characters.\n\n  if (length <= 1) {\n    return editorState;\n  }\n\n  var removalRange;\n  var finalSelection;\n\n  if (offset === length) {\n    // The cursor is at the end of the block. Swap the last two characters.\n    removalRange = selection.set('anchorOffset', offset - 1);\n    finalSelection = selection;\n  } else {\n    removalRange = selection.set('focusOffset', offset + 1);\n    finalSelection = removalRange.set('anchorOffset', offset + 1);\n  } // Extract the character to move as a fragment. This preserves its\n  // styling and entity, if any.\n\n\n  var movedFragment = getContentStateFragment(content, removalRange);\n  var afterRemoval = DraftModifier.removeRange(content, removalRange, 'backward'); // After the removal, the insertion target is one character back.\n\n  var selectionAfter = afterRemoval.getSelectionAfter();\n  var targetOffset = selectionAfter.getAnchorOffset() - 1;\n  var targetRange = selectionAfter.merge({\n    anchorOffset: targetOffset,\n    focusOffset: targetOffset\n  });\n  var afterInsert = DraftModifier.replaceWithFragment(afterRemoval, targetRange, movedFragment);\n  var newEditorState = EditorState.push(editorState, afterInsert, 'insert-fragment');\n  return EditorState.acceptSelection(newEditorState, finalSelection);\n}\n\nmodule.exports = keyCommandTransposeCharacters;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar EditorState = require(\"./EditorState\");\n\nfunction keyCommandUndo(e, editorState, updateFn) {\n  var undoneState = EditorState.undo(editorState); // If the last change to occur was a spellcheck change, allow the undo\n  // event to fall through to the browser. This allows the browser to record\n  // the unwanted change, which should soon lead it to learn not to suggest\n  // the correction again.\n\n  if (editorState.getLastChangeType() === 'spellcheck-change') {\n    var nativelyRenderedContent = undoneState.getCurrentContent();\n    updateFn(EditorState.set(undoneState, {\n      nativelyRenderedContent: nativelyRenderedContent\n    }));\n    return;\n  } // Otheriwse, manage the undo behavior manually.\n\n\n  e.preventDefault();\n\n  if (!editorState.getNativelyRenderedContent()) {\n    updateFn(undoneState);\n    return;\n  } // Trigger a re-render with the current content state to ensure that the\n  // component tree has up-to-date props for comparison.\n\n\n  updateFn(EditorState.set(editorState, {\n    nativelyRenderedContent: null\n  })); // Wait to ensure that the re-render has occurred before performing\n  // the undo action.\n\n  setTimeout(function () {\n    updateFn(undoneState);\n  }, 0);\n}\n\nmodule.exports = keyCommandUndo;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar Immutable = require(\"immutable\");\n\nvar Map = Immutable.Map;\n\nfunction modifyBlockForContentState(contentState, selectionState, operation) {\n  var startKey = selectionState.getStartKey();\n  var endKey = selectionState.getEndKey();\n  var blockMap = contentState.getBlockMap();\n  var newBlocks = blockMap.toSeq().skipUntil(function (_, k) {\n    return k === startKey;\n  }).takeUntil(function (_, k) {\n    return k === endKey;\n  }).concat(Map([[endKey, blockMap.get(endKey)]])).map(operation);\n  return contentState.merge({\n    blockMap: blockMap.merge(newBlocks),\n    selectionBefore: selectionState,\n    selectionAfter: selectionState\n  });\n}\n\nmodule.exports = modifyBlockForContentState;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar ContentBlockNode = require(\"./ContentBlockNode\");\n\nvar getNextDelimiterBlockKey = require(\"./getNextDelimiterBlockKey\");\n\nvar Immutable = require(\"immutable\");\n\nvar invariant = require(\"fbjs/lib/invariant\");\n\nvar OrderedMap = Immutable.OrderedMap,\n    List = Immutable.List;\n\nvar transformBlock = function transformBlock(key, blockMap, func) {\n  if (!key) {\n    return;\n  }\n\n  var block = blockMap.get(key);\n\n  if (!block) {\n    return;\n  }\n\n  blockMap.set(key, func(block));\n};\n\nvar updateBlockMapLinks = function updateBlockMapLinks(blockMap, originalBlockToBeMoved, originalTargetBlock, insertionMode, isExperimentalTreeBlock) {\n  if (!isExperimentalTreeBlock) {\n    return blockMap;\n  } // possible values of 'insertionMode' are: 'after', 'before'\n\n\n  var isInsertedAfterTarget = insertionMode === 'after';\n  var originalBlockKey = originalBlockToBeMoved.getKey();\n  var originalTargetKey = originalTargetBlock.getKey();\n  var originalParentKey = originalBlockToBeMoved.getParentKey();\n  var originalNextSiblingKey = originalBlockToBeMoved.getNextSiblingKey();\n  var originalPrevSiblingKey = originalBlockToBeMoved.getPrevSiblingKey();\n  var newParentKey = originalTargetBlock.getParentKey();\n  var newNextSiblingKey = isInsertedAfterTarget ? originalTargetBlock.getNextSiblingKey() : originalTargetKey;\n  var newPrevSiblingKey = isInsertedAfterTarget ? originalTargetKey : originalTargetBlock.getPrevSiblingKey();\n  return blockMap.withMutations(function (blocks) {\n    // update old parent\n    transformBlock(originalParentKey, blocks, function (block) {\n      var parentChildrenList = block.getChildKeys();\n      return block.merge({\n        children: parentChildrenList[\"delete\"](parentChildrenList.indexOf(originalBlockKey))\n      });\n    }); // update old prev\n\n    transformBlock(originalPrevSiblingKey, blocks, function (block) {\n      return block.merge({\n        nextSibling: originalNextSiblingKey\n      });\n    }); // update old next\n\n    transformBlock(originalNextSiblingKey, blocks, function (block) {\n      return block.merge({\n        prevSibling: originalPrevSiblingKey\n      });\n    }); // update new next\n\n    transformBlock(newNextSiblingKey, blocks, function (block) {\n      return block.merge({\n        prevSibling: originalBlockKey\n      });\n    }); // update new prev\n\n    transformBlock(newPrevSiblingKey, blocks, function (block) {\n      return block.merge({\n        nextSibling: originalBlockKey\n      });\n    }); // update new parent\n\n    transformBlock(newParentKey, blocks, function (block) {\n      var newParentChildrenList = block.getChildKeys();\n      var targetBlockIndex = newParentChildrenList.indexOf(originalTargetKey);\n      var insertionIndex = isInsertedAfterTarget ? targetBlockIndex + 1 : targetBlockIndex !== 0 ? targetBlockIndex - 1 : 0;\n      var newChildrenArray = newParentChildrenList.toArray();\n      newChildrenArray.splice(insertionIndex, 0, originalBlockKey);\n      return block.merge({\n        children: List(newChildrenArray)\n      });\n    }); // update block\n\n    transformBlock(originalBlockKey, blocks, function (block) {\n      return block.merge({\n        nextSibling: newNextSiblingKey,\n        prevSibling: newPrevSiblingKey,\n        parent: newParentKey\n      });\n    });\n  });\n};\n\nvar moveBlockInContentState = function moveBlockInContentState(contentState, blockToBeMoved, targetBlock, insertionMode) {\n  !(insertionMode !== 'replace') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Replacing blocks is not supported.') : invariant(false) : void 0;\n  var targetKey = targetBlock.getKey();\n  var blockKey = blockToBeMoved.getKey();\n  !(blockKey !== targetKey) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Block cannot be moved next to itself.') : invariant(false) : void 0;\n  var blockMap = contentState.getBlockMap();\n  var isExperimentalTreeBlock = blockToBeMoved instanceof ContentBlockNode;\n  var blocksToBeMoved = [blockToBeMoved];\n  var blockMapWithoutBlocksToBeMoved = blockMap[\"delete\"](blockKey);\n\n  if (isExperimentalTreeBlock) {\n    blocksToBeMoved = [];\n    blockMapWithoutBlocksToBeMoved = blockMap.withMutations(function (blocks) {\n      var nextSiblingKey = blockToBeMoved.getNextSiblingKey();\n      var nextDelimiterBlockKey = getNextDelimiterBlockKey(blockToBeMoved, blocks);\n      blocks.toSeq().skipUntil(function (block) {\n        return block.getKey() === blockKey;\n      }).takeWhile(function (block) {\n        var key = block.getKey();\n        var isBlockToBeMoved = key === blockKey;\n        var hasNextSiblingAndIsNotNextSibling = nextSiblingKey && key !== nextSiblingKey;\n        var doesNotHaveNextSiblingAndIsNotDelimiter = !nextSiblingKey && block.getParentKey() && (!nextDelimiterBlockKey || key !== nextDelimiterBlockKey);\n        return !!(isBlockToBeMoved || hasNextSiblingAndIsNotNextSibling || doesNotHaveNextSiblingAndIsNotDelimiter);\n      }).forEach(function (block) {\n        blocksToBeMoved.push(block);\n        blocks[\"delete\"](block.getKey());\n      });\n    });\n  }\n\n  var blocksBefore = blockMapWithoutBlocksToBeMoved.toSeq().takeUntil(function (v) {\n    return v === targetBlock;\n  });\n  var blocksAfter = blockMapWithoutBlocksToBeMoved.toSeq().skipUntil(function (v) {\n    return v === targetBlock;\n  }).skip(1);\n  var slicedBlocks = blocksToBeMoved.map(function (block) {\n    return [block.getKey(), block];\n  });\n  var newBlocks = OrderedMap();\n\n  if (insertionMode === 'before') {\n    var blockBefore = contentState.getBlockBefore(targetKey);\n    !(!blockBefore || blockBefore.getKey() !== blockToBeMoved.getKey()) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Block cannot be moved next to itself.') : invariant(false) : void 0;\n    newBlocks = blocksBefore.concat([].concat(slicedBlocks, [[targetKey, targetBlock]]), blocksAfter).toOrderedMap();\n  } else if (insertionMode === 'after') {\n    var blockAfter = contentState.getBlockAfter(targetKey);\n    !(!blockAfter || blockAfter.getKey() !== blockKey) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Block cannot be moved next to itself.') : invariant(false) : void 0;\n    newBlocks = blocksBefore.concat([[targetKey, targetBlock]].concat(slicedBlocks), blocksAfter).toOrderedMap();\n  }\n\n  return contentState.merge({\n    blockMap: updateBlockMapLinks(newBlocks, blockToBeMoved, targetBlock, insertionMode, isExperimentalTreeBlock),\n    selectionBefore: contentState.getSelectionAfter(),\n    selectionAfter: contentState.getSelectionAfter().merge({\n      anchorKey: blockKey,\n      focusKey: blockKey\n    })\n  });\n};\n\nmodule.exports = moveBlockInContentState;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar warning = require(\"fbjs/lib/warning\");\n/**\n * Given a collapsed selection, move the focus `maxDistance` backward within\n * the selected block. If the selection will go beyond the start of the block,\n * move focus to the end of the previous block, but no further.\n *\n * This function is not Unicode-aware, so surrogate pairs will be treated\n * as having length 2.\n */\n\n\nfunction moveSelectionBackward(editorState, maxDistance) {\n  var selection = editorState.getSelection(); // Should eventually make this an invariant\n\n  process.env.NODE_ENV !== \"production\" ? warning(selection.isCollapsed(), 'moveSelectionBackward should only be called with a collapsed SelectionState') : void 0;\n  var content = editorState.getCurrentContent();\n  var key = selection.getStartKey();\n  var offset = selection.getStartOffset();\n  var focusKey = key;\n  var focusOffset = 0;\n\n  if (maxDistance > offset) {\n    var keyBefore = content.getKeyBefore(key);\n\n    if (keyBefore == null) {\n      focusKey = key;\n    } else {\n      focusKey = keyBefore;\n      var blockBefore = content.getBlockForKey(keyBefore);\n      focusOffset = blockBefore.getText().length;\n    }\n  } else {\n    focusOffset = offset - maxDistance;\n  }\n\n  return selection.merge({\n    focusKey: focusKey,\n    focusOffset: focusOffset,\n    isBackward: true\n  });\n}\n\nmodule.exports = moveSelectionBackward;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar warning = require(\"fbjs/lib/warning\");\n/**\n * Given a collapsed selection, move the focus `maxDistance` forward within\n * the selected block. If the selection will go beyond the end of the block,\n * move focus to the start of the next block, but no further.\n *\n * This function is not Unicode-aware, so surrogate pairs will be treated\n * as having length 2.\n */\n\n\nfunction moveSelectionForward(editorState, maxDistance) {\n  var selection = editorState.getSelection(); // Should eventually make this an invariant\n\n  process.env.NODE_ENV !== \"production\" ? warning(selection.isCollapsed(), 'moveSelectionForward should only be called with a collapsed SelectionState') : void 0;\n  var key = selection.getStartKey();\n  var offset = selection.getStartOffset();\n  var content = editorState.getCurrentContent();\n  var focusKey = key;\n  var focusOffset;\n  var block = content.getBlockForKey(key);\n\n  if (maxDistance > block.getText().length - offset) {\n    focusKey = content.getKeyAfter(key);\n    focusOffset = 0;\n  } else {\n    focusOffset = offset + maxDistance;\n  }\n\n  return selection.merge({\n    focusKey: focusKey,\n    focusOffset: focusOffset\n  });\n}\n\nmodule.exports = moveSelectionForward;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar ContentBlockNode = require(\"./ContentBlockNode\");\n\nvar generateRandomKey = require(\"./generateRandomKey\");\n\nvar Immutable = require(\"immutable\");\n\nvar OrderedMap = Immutable.OrderedMap;\n\nvar randomizeContentBlockNodeKeys = function randomizeContentBlockNodeKeys(blockMap) {\n  var newKeysRef = {}; // we keep track of root blocks in order to update subsequent sibling links\n\n  var lastRootBlock;\n  return OrderedMap(blockMap.withMutations(function (blockMapState) {\n    blockMapState.forEach(function (block, index) {\n      var oldKey = block.getKey();\n      var nextKey = block.getNextSiblingKey();\n      var prevKey = block.getPrevSiblingKey();\n      var childrenKeys = block.getChildKeys();\n      var parentKey = block.getParentKey(); // new key that we will use to build linking\n\n      var key = generateRandomKey(); // we will add it here to re-use it later\n\n      newKeysRef[oldKey] = key;\n\n      if (nextKey) {\n        var nextBlock = blockMapState.get(nextKey);\n\n        if (nextBlock) {\n          blockMapState.setIn([nextKey, 'prevSibling'], key);\n        } else {\n          // this can happen when generating random keys for fragments\n          blockMapState.setIn([oldKey, 'nextSibling'], null);\n        }\n      }\n\n      if (prevKey) {\n        var prevBlock = blockMapState.get(prevKey);\n\n        if (prevBlock) {\n          blockMapState.setIn([prevKey, 'nextSibling'], key);\n        } else {\n          // this can happen when generating random keys for fragments\n          blockMapState.setIn([oldKey, 'prevSibling'], null);\n        }\n      }\n\n      if (parentKey && blockMapState.get(parentKey)) {\n        var parentBlock = blockMapState.get(parentKey);\n        var parentChildrenList = parentBlock.getChildKeys();\n        blockMapState.setIn([parentKey, 'children'], parentChildrenList.set(parentChildrenList.indexOf(block.getKey()), key));\n      } else {\n        // blocks will then be treated as root block nodes\n        blockMapState.setIn([oldKey, 'parent'], null);\n\n        if (lastRootBlock) {\n          blockMapState.setIn([lastRootBlock.getKey(), 'nextSibling'], key);\n          blockMapState.setIn([oldKey, 'prevSibling'], newKeysRef[lastRootBlock.getKey()]);\n        }\n\n        lastRootBlock = blockMapState.get(oldKey);\n      }\n\n      childrenKeys.forEach(function (childKey) {\n        var childBlock = blockMapState.get(childKey);\n\n        if (childBlock) {\n          blockMapState.setIn([childKey, 'parent'], key);\n        } else {\n          blockMapState.setIn([oldKey, 'children'], block.getChildKeys().filter(function (child) {\n            return child !== childKey;\n          }));\n        }\n      });\n    });\n  }).toArray().map(function (block) {\n    return [newKeysRef[block.getKey()], block.set('key', newKeysRef[block.getKey()])];\n  }));\n};\n\nvar randomizeContentBlockKeys = function randomizeContentBlockKeys(blockMap) {\n  return OrderedMap(blockMap.toArray().map(function (block) {\n    var key = generateRandomKey();\n    return [key, block.set('key', key)];\n  }));\n};\n\nvar randomizeBlockMapKeys = function randomizeBlockMapKeys(blockMap) {\n  var isTreeBasedBlockMap = blockMap.first() instanceof ContentBlockNode;\n\n  if (!isTreeBasedBlockMap) {\n    return randomizeContentBlockKeys(blockMap);\n  }\n\n  return randomizeContentBlockNodeKeys(blockMap);\n};\n\nmodule.exports = randomizeBlockMapKeys;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar CharacterMetadata = require(\"./CharacterMetadata\");\n\nvar findRangesImmutable = require(\"./findRangesImmutable\");\n\nvar invariant = require(\"fbjs/lib/invariant\");\n\nfunction removeEntitiesAtEdges(contentState, selectionState) {\n  var blockMap = contentState.getBlockMap();\n  var entityMap = contentState.getEntityMap();\n  var updatedBlocks = {};\n  var startKey = selectionState.getStartKey();\n  var startOffset = selectionState.getStartOffset();\n  var startBlock = blockMap.get(startKey);\n  var updatedStart = removeForBlock(entityMap, startBlock, startOffset);\n\n  if (updatedStart !== startBlock) {\n    updatedBlocks[startKey] = updatedStart;\n  }\n\n  var endKey = selectionState.getEndKey();\n  var endOffset = selectionState.getEndOffset();\n  var endBlock = blockMap.get(endKey);\n\n  if (startKey === endKey) {\n    endBlock = updatedStart;\n  }\n\n  var updatedEnd = removeForBlock(entityMap, endBlock, endOffset);\n\n  if (updatedEnd !== endBlock) {\n    updatedBlocks[endKey] = updatedEnd;\n  }\n\n  if (!Object.keys(updatedBlocks).length) {\n    return contentState.set('selectionAfter', selectionState);\n  }\n\n  return contentState.merge({\n    blockMap: blockMap.merge(updatedBlocks),\n    selectionAfter: selectionState\n  });\n}\n/**\n * Given a list of characters and an offset that is in the middle of an entity,\n * returns the start and end of the entity that is overlapping the offset.\n * Note: This method requires that the offset be in an entity range.\n */\n\n\nfunction getRemovalRange(characters, entityKey, offset) {\n  var removalRange; // Iterates through a list looking for ranges of matching items\n  // based on the 'isEqual' callback.\n  // Then instead of returning the result, call the 'found' callback\n  // with each range.\n  // Then filters those ranges based on the 'filter' callback\n  //\n  // Here we use it to find ranges of characters with the same entity key.\n\n  findRangesImmutable(characters, // the list to iterate through\n  function (a, b) {\n    return a.getEntity() === b.getEntity();\n  }, // 'isEqual' callback\n  function (element) {\n    return element.getEntity() === entityKey;\n  }, // 'filter' callback\n  function (start, end) {\n    // 'found' callback\n    if (start <= offset && end >= offset) {\n      // this entity overlaps the offset index\n      removalRange = {\n        start: start,\n        end: end\n      };\n    }\n  });\n  !(typeof removalRange === 'object') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Removal range must exist within character list.') : invariant(false) : void 0;\n  return removalRange;\n}\n\nfunction removeForBlock(entityMap, block, offset) {\n  var chars = block.getCharacterList();\n  var charBefore = offset > 0 ? chars.get(offset - 1) : undefined;\n  var charAfter = offset < chars.count() ? chars.get(offset) : undefined;\n  var entityBeforeCursor = charBefore ? charBefore.getEntity() : undefined;\n  var entityAfterCursor = charAfter ? charAfter.getEntity() : undefined;\n\n  if (entityAfterCursor && entityAfterCursor === entityBeforeCursor) {\n    var entity = entityMap.__get(entityAfterCursor);\n\n    if (entity.getMutability() !== 'MUTABLE') {\n      var _getRemovalRange = getRemovalRange(chars, entityAfterCursor, offset),\n          start = _getRemovalRange.start,\n          end = _getRemovalRange.end;\n\n      var current;\n\n      while (start < end) {\n        current = chars.get(start);\n        chars = chars.set(start, CharacterMetadata.applyEntity(current, null));\n        start++;\n      }\n\n      return block.set('characterList', chars);\n    }\n  }\n\n  return block;\n}\n\nmodule.exports = removeEntitiesAtEdges;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar ContentBlockNode = require(\"./ContentBlockNode\");\n\nvar getNextDelimiterBlockKey = require(\"./getNextDelimiterBlockKey\");\n\nvar Immutable = require(\"immutable\");\n\nvar List = Immutable.List,\n    Map = Immutable.Map;\n\nvar transformBlock = function transformBlock(key, blockMap, func) {\n  if (!key) {\n    return;\n  }\n\n  var block = blockMap.get(key);\n\n  if (!block) {\n    return;\n  }\n\n  blockMap.set(key, func(block));\n};\n/**\n * Ancestors needs to be preserved when there are non selected\n * children to make sure we do not leave any orphans behind\n */\n\n\nvar getAncestorsKeys = function getAncestorsKeys(blockKey, blockMap) {\n  var parents = [];\n\n  if (!blockKey) {\n    return parents;\n  }\n\n  var blockNode = blockMap.get(blockKey);\n\n  while (blockNode && blockNode.getParentKey()) {\n    var parentKey = blockNode.getParentKey();\n\n    if (parentKey) {\n      parents.push(parentKey);\n    }\n\n    blockNode = parentKey ? blockMap.get(parentKey) : null;\n  }\n\n  return parents;\n};\n/**\n * Get all next delimiter keys until we hit a root delimiter and return\n * an array of key references\n */\n\n\nvar getNextDelimitersBlockKeys = function getNextDelimitersBlockKeys(block, blockMap) {\n  var nextDelimiters = [];\n\n  if (!block) {\n    return nextDelimiters;\n  }\n\n  var nextDelimiter = getNextDelimiterBlockKey(block, blockMap);\n\n  while (nextDelimiter && blockMap.get(nextDelimiter)) {\n    var _block = blockMap.get(nextDelimiter);\n\n    nextDelimiters.push(nextDelimiter); // we do not need to keep checking all root node siblings, just the first occurance\n\n    nextDelimiter = _block.getParentKey() ? getNextDelimiterBlockKey(_block, blockMap) : null;\n  }\n\n  return nextDelimiters;\n};\n\nvar getNextValidSibling = function getNextValidSibling(block, blockMap, originalBlockMap) {\n  if (!block) {\n    return null;\n  } // note that we need to make sure we refer to the original block since this\n  // function is called within a withMutations\n\n\n  var nextValidSiblingKey = originalBlockMap.get(block.getKey()).getNextSiblingKey();\n\n  while (nextValidSiblingKey && !blockMap.get(nextValidSiblingKey)) {\n    nextValidSiblingKey = originalBlockMap.get(nextValidSiblingKey).getNextSiblingKey() || null;\n  }\n\n  return nextValidSiblingKey;\n};\n\nvar getPrevValidSibling = function getPrevValidSibling(block, blockMap, originalBlockMap) {\n  if (!block) {\n    return null;\n  } // note that we need to make sure we refer to the original block since this\n  // function is called within a withMutations\n\n\n  var prevValidSiblingKey = originalBlockMap.get(block.getKey()).getPrevSiblingKey();\n\n  while (prevValidSiblingKey && !blockMap.get(prevValidSiblingKey)) {\n    prevValidSiblingKey = originalBlockMap.get(prevValidSiblingKey).getPrevSiblingKey() || null;\n  }\n\n  return prevValidSiblingKey;\n};\n\nvar updateBlockMapLinks = function updateBlockMapLinks(blockMap, startBlock, endBlock, originalBlockMap) {\n  return blockMap.withMutations(function (blocks) {\n    // update start block if its retained\n    transformBlock(startBlock.getKey(), blocks, function (block) {\n      return block.merge({\n        nextSibling: getNextValidSibling(block, blocks, originalBlockMap),\n        prevSibling: getPrevValidSibling(block, blocks, originalBlockMap)\n      });\n    }); // update endblock if its retained\n\n    transformBlock(endBlock.getKey(), blocks, function (block) {\n      return block.merge({\n        nextSibling: getNextValidSibling(block, blocks, originalBlockMap),\n        prevSibling: getPrevValidSibling(block, blocks, originalBlockMap)\n      });\n    }); // update start block parent ancestors\n\n    getAncestorsKeys(startBlock.getKey(), originalBlockMap).forEach(function (parentKey) {\n      return transformBlock(parentKey, blocks, function (block) {\n        return block.merge({\n          children: block.getChildKeys().filter(function (key) {\n            return blocks.get(key);\n          }),\n          nextSibling: getNextValidSibling(block, blocks, originalBlockMap),\n          prevSibling: getPrevValidSibling(block, blocks, originalBlockMap)\n        });\n      });\n    }); // update start block next - can only happen if startBlock == endBlock\n\n    transformBlock(startBlock.getNextSiblingKey(), blocks, function (block) {\n      return block.merge({\n        prevSibling: startBlock.getPrevSiblingKey()\n      });\n    }); // update start block prev\n\n    transformBlock(startBlock.getPrevSiblingKey(), blocks, function (block) {\n      return block.merge({\n        nextSibling: getNextValidSibling(block, blocks, originalBlockMap)\n      });\n    }); // update end block next\n\n    transformBlock(endBlock.getNextSiblingKey(), blocks, function (block) {\n      return block.merge({\n        prevSibling: getPrevValidSibling(block, blocks, originalBlockMap)\n      });\n    }); // update end block prev\n\n    transformBlock(endBlock.getPrevSiblingKey(), blocks, function (block) {\n      return block.merge({\n        nextSibling: endBlock.getNextSiblingKey()\n      });\n    }); // update end block parent ancestors\n\n    getAncestorsKeys(endBlock.getKey(), originalBlockMap).forEach(function (parentKey) {\n      transformBlock(parentKey, blocks, function (block) {\n        return block.merge({\n          children: block.getChildKeys().filter(function (key) {\n            return blocks.get(key);\n          }),\n          nextSibling: getNextValidSibling(block, blocks, originalBlockMap),\n          prevSibling: getPrevValidSibling(block, blocks, originalBlockMap)\n        });\n      });\n    }); // update next delimiters all the way to a root delimiter\n\n    getNextDelimitersBlockKeys(endBlock, originalBlockMap).forEach(function (delimiterKey) {\n      return transformBlock(delimiterKey, blocks, function (block) {\n        return block.merge({\n          nextSibling: getNextValidSibling(block, blocks, originalBlockMap),\n          prevSibling: getPrevValidSibling(block, blocks, originalBlockMap)\n        });\n      });\n    }); // if parent (startBlock) was deleted\n\n    if (blockMap.get(startBlock.getKey()) == null && blockMap.get(endBlock.getKey()) != null && endBlock.getParentKey() === startBlock.getKey() && endBlock.getPrevSiblingKey() == null) {\n      var prevSiblingKey = startBlock.getPrevSiblingKey(); // endBlock becomes next sibling of parent's prevSibling\n\n      transformBlock(endBlock.getKey(), blocks, function (block) {\n        return block.merge({\n          prevSibling: prevSiblingKey\n        });\n      });\n      transformBlock(prevSiblingKey, blocks, function (block) {\n        return block.merge({\n          nextSibling: endBlock.getKey()\n        });\n      }); // Update parent for previous parent's children, and children for that parent\n\n      var prevSibling = prevSiblingKey ? blockMap.get(prevSiblingKey) : null;\n      var newParentKey = prevSibling ? prevSibling.getParentKey() : null;\n      startBlock.getChildKeys().forEach(function (childKey) {\n        transformBlock(childKey, blocks, function (block) {\n          return block.merge({\n            parent: newParentKey // set to null if there is no parent\n\n          });\n        });\n      });\n\n      if (newParentKey != null) {\n        var newParent = blockMap.get(newParentKey);\n        transformBlock(newParentKey, blocks, function (block) {\n          return block.merge({\n            children: newParent.getChildKeys().concat(startBlock.getChildKeys())\n          });\n        });\n      } // last child of deleted parent should point to next sibling\n\n\n      transformBlock(startBlock.getChildKeys().find(function (key) {\n        var block = blockMap.get(key);\n        return block.getNextSiblingKey() === null;\n      }), blocks, function (block) {\n        return block.merge({\n          nextSibling: startBlock.getNextSiblingKey()\n        });\n      });\n    }\n  });\n};\n\nvar removeRangeFromContentState = function removeRangeFromContentState(contentState, selectionState) {\n  if (selectionState.isCollapsed()) {\n    return contentState;\n  }\n\n  var blockMap = contentState.getBlockMap();\n  var startKey = selectionState.getStartKey();\n  var startOffset = selectionState.getStartOffset();\n  var endKey = selectionState.getEndKey();\n  var endOffset = selectionState.getEndOffset();\n  var startBlock = blockMap.get(startKey);\n  var endBlock = blockMap.get(endKey); // we assume that ContentBlockNode and ContentBlocks are not mixed together\n\n  var isExperimentalTreeBlock = startBlock instanceof ContentBlockNode; // used to retain blocks that should not be deleted to avoid orphan children\n\n  var parentAncestors = [];\n\n  if (isExperimentalTreeBlock) {\n    var endBlockchildrenKeys = endBlock.getChildKeys();\n    var endBlockAncestors = getAncestorsKeys(endKey, blockMap); // endBlock has unselected siblings so we can not remove its ancestors parents\n\n    if (endBlock.getNextSiblingKey()) {\n      parentAncestors = parentAncestors.concat(endBlockAncestors);\n    } // endBlock has children so can not remove this block or any of its ancestors\n\n\n    if (!endBlockchildrenKeys.isEmpty()) {\n      parentAncestors = parentAncestors.concat(endBlockAncestors.concat([endKey]));\n    } // we need to retain all ancestors of the next delimiter block\n\n\n    parentAncestors = parentAncestors.concat(getAncestorsKeys(getNextDelimiterBlockKey(endBlock, blockMap), blockMap));\n  }\n\n  var characterList;\n\n  if (startBlock === endBlock) {\n    characterList = removeFromList(startBlock.getCharacterList(), startOffset, endOffset);\n  } else {\n    characterList = startBlock.getCharacterList().slice(0, startOffset).concat(endBlock.getCharacterList().slice(endOffset));\n  }\n\n  var modifiedStart = startBlock.merge({\n    text: startBlock.getText().slice(0, startOffset) + endBlock.getText().slice(endOffset),\n    characterList: characterList\n  }); // If cursor (collapsed) is at the start of the first child, delete parent\n  // instead of child\n\n  var shouldDeleteParent = isExperimentalTreeBlock && startOffset === 0 && endOffset === 0 && endBlock.getParentKey() === startKey && endBlock.getPrevSiblingKey() == null;\n  var newBlocks = shouldDeleteParent ? Map([[startKey, null]]) : blockMap.toSeq().skipUntil(function (_, k) {\n    return k === startKey;\n  }).takeUntil(function (_, k) {\n    return k === endKey;\n  }).filter(function (_, k) {\n    return parentAncestors.indexOf(k) === -1;\n  }).concat(Map([[endKey, null]])).map(function (_, k) {\n    return k === startKey ? modifiedStart : null;\n  });\n  var updatedBlockMap = blockMap.merge(newBlocks).filter(function (block) {\n    return !!block;\n  }); // Only update tree block pointers if the range is across blocks\n\n  if (isExperimentalTreeBlock && startBlock !== endBlock) {\n    updatedBlockMap = updateBlockMapLinks(updatedBlockMap, startBlock, endBlock, blockMap);\n  }\n\n  return contentState.merge({\n    blockMap: updatedBlockMap,\n    selectionBefore: selectionState,\n    selectionAfter: selectionState.merge({\n      anchorKey: startKey,\n      anchorOffset: startOffset,\n      focusKey: startKey,\n      focusOffset: startOffset,\n      isBackward: false\n    })\n  });\n};\n/**\n * Maintain persistence for target list when removing characters on the\n * head and tail of the character list.\n */\n\n\nvar removeFromList = function removeFromList(targetList, startOffset, endOffset) {\n  if (startOffset === 0) {\n    while (startOffset < endOffset) {\n      targetList = targetList.shift();\n      startOffset++;\n    }\n  } else if (endOffset === targetList.count()) {\n    while (endOffset > startOffset) {\n      targetList = targetList.pop();\n      endOffset--;\n    }\n  } else {\n    var head = targetList.slice(0, startOffset);\n    var tail = targetList.slice(endOffset);\n    targetList = head.concat(tail).toList();\n  }\n\n  return targetList;\n};\n\nmodule.exports = removeRangeFromContentState;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftModifier = require(\"./DraftModifier\");\n\nvar gkx = require(\"./gkx\");\n\nvar experimentalTreeDataSupport = gkx('draft_tree_data_support');\n/**\n * For a collapsed selection state, remove text based on the specified strategy.\n * If the selection state is not collapsed, remove the entire selected range.\n */\n\nfunction removeTextWithStrategy(editorState, strategy, direction) {\n  var selection = editorState.getSelection();\n  var content = editorState.getCurrentContent();\n  var target = selection;\n  var anchorKey = selection.getAnchorKey();\n  var focusKey = selection.getFocusKey();\n  var anchorBlock = content.getBlockForKey(anchorKey);\n\n  if (experimentalTreeDataSupport) {\n    if (direction === 'forward') {\n      if (anchorKey !== focusKey) {\n        // For now we ignore forward delete across blocks,\n        // if there is demand for this we will implement it.\n        return content;\n      }\n    }\n  }\n\n  if (selection.isCollapsed()) {\n    if (direction === 'forward') {\n      if (editorState.isSelectionAtEndOfContent()) {\n        return content;\n      }\n\n      if (experimentalTreeDataSupport) {\n        var isAtEndOfBlock = selection.getAnchorOffset() === content.getBlockForKey(anchorKey).getLength();\n\n        if (isAtEndOfBlock) {\n          var anchorBlockSibling = content.getBlockForKey(anchorBlock.nextSibling);\n\n          if (!anchorBlockSibling || anchorBlockSibling.getLength() === 0) {\n            // For now we ignore forward delete at the end of a block,\n            // if there is demand for this we will implement it.\n            return content;\n          }\n        }\n      }\n    } else if (editorState.isSelectionAtStartOfContent()) {\n      return content;\n    }\n\n    target = strategy(editorState);\n\n    if (target === selection) {\n      return content;\n    }\n  }\n\n  return DraftModifier.removeRange(content, target, direction);\n}\n\nmodule.exports = removeTextWithStrategy;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar REGEX_BLOCK_DELIMITER = new RegExp('\\r', 'g');\n\nfunction sanitizeDraftText(input) {\n  return input.replace(REGEX_BLOCK_DELIMITER, '');\n}\n\nmodule.exports = sanitizeDraftText;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar DraftEffects = require(\"./DraftEffects\");\n\nvar DraftJsDebugLogging = require(\"./DraftJsDebugLogging\");\n\nvar UserAgent = require(\"fbjs/lib/UserAgent\");\n\nvar containsNode = require(\"fbjs/lib/containsNode\");\n\nvar getActiveElement = require(\"fbjs/lib/getActiveElement\");\n\nvar getCorrectDocumentFromNode = require(\"./getCorrectDocumentFromNode\");\n\nvar invariant = require(\"fbjs/lib/invariant\");\n\nvar isElement = require(\"./isElement\");\n\nvar isIE = UserAgent.isBrowser('IE');\n\nfunction getAnonymizedDOM(node, getNodeLabels) {\n  if (!node) {\n    return '[empty]';\n  }\n\n  var anonymized = anonymizeTextWithin(node, getNodeLabels);\n\n  if (anonymized.nodeType === Node.TEXT_NODE) {\n    return anonymized.textContent;\n  }\n\n  !isElement(anonymized) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Node must be an Element if it is not a text node.') : invariant(false) : void 0;\n  var castedElement = anonymized;\n  return castedElement.outerHTML;\n}\n\nfunction anonymizeTextWithin(node, getNodeLabels) {\n  var labels = getNodeLabels !== undefined ? getNodeLabels(node) : [];\n\n  if (node.nodeType === Node.TEXT_NODE) {\n    var length = node.textContent.length;\n    return getCorrectDocumentFromNode(node).createTextNode('[text ' + length + (labels.length ? ' | ' + labels.join(', ') : '') + ']');\n  }\n\n  var clone = node.cloneNode();\n\n  if (clone.nodeType === 1 && labels.length) {\n    clone.setAttribute('data-labels', labels.join(', '));\n  }\n\n  var childNodes = node.childNodes;\n\n  for (var ii = 0; ii < childNodes.length; ii++) {\n    clone.appendChild(anonymizeTextWithin(childNodes[ii], getNodeLabels));\n  }\n\n  return clone;\n}\n\nfunction getAnonymizedEditorDOM(node, getNodeLabels) {\n  // grabbing the DOM content of the Draft editor\n  var currentNode = node; // this should only be used after checking with isElement\n\n  var castedNode = currentNode;\n\n  while (currentNode) {\n    if (isElement(currentNode) && castedNode.hasAttribute('contenteditable')) {\n      // found the Draft editor container\n      return getAnonymizedDOM(currentNode, getNodeLabels);\n    } else {\n      currentNode = currentNode.parentNode;\n      castedNode = currentNode;\n    }\n  }\n\n  return 'Could not find contentEditable parent of node';\n}\n\nfunction getNodeLength(node) {\n  return node.nodeValue === null ? node.childNodes.length : node.nodeValue.length;\n}\n/**\n * In modern non-IE browsers, we can support both forward and backward\n * selections.\n *\n * Note: IE10+ supports the Selection object, but it does not support\n * the `extend` method, which means that even in modern IE, it's not possible\n * to programatically create a backward selection. Thus, for all IE\n * versions, we use the old IE API to create our selections.\n */\n\n\nfunction setDraftEditorSelection(selectionState, node, blockKey, nodeStart, nodeEnd) {\n  // It's possible that the editor has been removed from the DOM but\n  // our selection code doesn't know it yet. Forcing selection in\n  // this case may lead to errors, so just bail now.\n  var documentObject = getCorrectDocumentFromNode(node);\n\n  if (!containsNode(documentObject.documentElement, node)) {\n    return;\n  }\n\n  var selection = documentObject.defaultView.getSelection();\n  var anchorKey = selectionState.getAnchorKey();\n  var anchorOffset = selectionState.getAnchorOffset();\n  var focusKey = selectionState.getFocusKey();\n  var focusOffset = selectionState.getFocusOffset();\n  var isBackward = selectionState.getIsBackward(); // IE doesn't support backward selection. Swap key/offset pairs.\n\n  if (!selection.extend && isBackward) {\n    var tempKey = anchorKey;\n    var tempOffset = anchorOffset;\n    anchorKey = focusKey;\n    anchorOffset = focusOffset;\n    focusKey = tempKey;\n    focusOffset = tempOffset;\n    isBackward = false;\n  }\n\n  var hasAnchor = anchorKey === blockKey && nodeStart <= anchorOffset && nodeEnd >= anchorOffset;\n  var hasFocus = focusKey === blockKey && nodeStart <= focusOffset && nodeEnd >= focusOffset; // If the selection is entirely bound within this node, set the selection\n  // and be done.\n\n  if (hasAnchor && hasFocus) {\n    selection.removeAllRanges();\n    addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n    addFocusToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    return;\n  }\n\n  if (!isBackward) {\n    // If the anchor is within this node, set the range start.\n    if (hasAnchor) {\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n    } // If the focus is within this node, we can assume that we have\n    // already set the appropriate start range on the selection, and\n    // can simply extend the selection.\n\n\n    if (hasFocus) {\n      addFocusToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    }\n  } else {\n    // If this node has the focus, set the selection range to be a\n    // collapsed range beginning here. Later, when we encounter the anchor,\n    // we'll use this information to extend the selection.\n    if (hasFocus) {\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, focusOffset - nodeStart, selectionState);\n    } // If this node has the anchor, we may assume that the correct\n    // focus information is already stored on the selection object.\n    // We keep track of it, reset the selection range, and extend it\n    // back to the focus point.\n\n\n    if (hasAnchor) {\n      var storedFocusNode = selection.focusNode;\n      var storedFocusOffset = selection.focusOffset;\n      selection.removeAllRanges();\n      addPointToSelection(selection, node, anchorOffset - nodeStart, selectionState);\n      addFocusToSelection(selection, storedFocusNode, storedFocusOffset, selectionState);\n    }\n  }\n}\n/**\n * Extend selection towards focus point.\n */\n\n\nfunction addFocusToSelection(selection, node, offset, selectionState) {\n  var activeElement = getActiveElement();\n  var extend = selection.extend; // containsNode returns false if node is null.\n  // Let's refine the type of this value out here so flow knows.\n\n  if (extend && node != null && containsNode(activeElement, node)) {\n    // If `extend` is called while another element has focus, an error is\n    // thrown. We therefore disable `extend` if the active element is somewhere\n    // other than the node we are selecting. This should only occur in Firefox,\n    // since it is the only browser to support multiple selections.\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=921444.\n    // logging to catch bug that is being reported in t16250795\n    if (offset > getNodeLength(node)) {\n      // the call to 'selection.extend' is about to throw\n      DraftJsDebugLogging.logSelectionStateFailure({\n        anonymizedDom: getAnonymizedEditorDOM(node),\n        extraParams: JSON.stringify({\n          offset: offset\n        }),\n        selectionState: JSON.stringify(selectionState.toJS())\n      });\n    } // logging to catch bug that is being reported in t18110632\n\n\n    var nodeWasFocus = node === selection.focusNode;\n\n    try {\n      // Fixes some reports of \"InvalidStateError: Failed to execute 'extend' on\n      // 'Selection': This Selection object doesn't have any Ranges.\"\n      // Note: selection.extend does not exist in IE.\n      if (selection.rangeCount > 0 && selection.extend) {\n        selection.extend(node, offset);\n      }\n    } catch (e) {\n      DraftJsDebugLogging.logSelectionStateFailure({\n        anonymizedDom: getAnonymizedEditorDOM(node, function (n) {\n          var labels = [];\n\n          if (n === activeElement) {\n            labels.push('active element');\n          }\n\n          if (n === selection.anchorNode) {\n            labels.push('selection anchor node');\n          }\n\n          if (n === selection.focusNode) {\n            labels.push('selection focus node');\n          }\n\n          return labels;\n        }),\n        extraParams: JSON.stringify({\n          activeElementName: activeElement ? activeElement.nodeName : null,\n          nodeIsFocus: node === selection.focusNode,\n          nodeWasFocus: nodeWasFocus,\n          selectionRangeCount: selection.rangeCount,\n          selectionAnchorNodeName: selection.anchorNode ? selection.anchorNode.nodeName : null,\n          selectionAnchorOffset: selection.anchorOffset,\n          selectionFocusNodeName: selection.focusNode ? selection.focusNode.nodeName : null,\n          selectionFocusOffset: selection.focusOffset,\n          message: e ? '' + e : null,\n          offset: offset\n        }, null, 2),\n        selectionState: JSON.stringify(selectionState.toJS(), null, 2)\n      }); // allow the error to be thrown -\n      // better than continuing in a broken state\n\n      throw e;\n    }\n  } else {\n    // IE doesn't support extend. This will mean no backward selection.\n    // Extract the existing selection range and add focus to it.\n    // Additionally, clone the selection range. IE11 throws an\n    // InvalidStateError when attempting to access selection properties\n    // after the range is detached.\n    if (node && selection.rangeCount > 0) {\n      var range = selection.getRangeAt(0);\n      range.setEnd(node, offset);\n      selection.addRange(range.cloneRange());\n    }\n  }\n}\n\nfunction addPointToSelection(selection, node, offset, selectionState) {\n  var range = getCorrectDocumentFromNode(node).createRange(); // logging to catch bug that is being reported in t16250795\n\n  if (offset > getNodeLength(node)) {\n    // in this case we know that the call to 'range.setStart' is about to throw\n    DraftJsDebugLogging.logSelectionStateFailure({\n      anonymizedDom: getAnonymizedEditorDOM(node),\n      extraParams: JSON.stringify({\n        offset: offset\n      }),\n      selectionState: JSON.stringify(selectionState.toJS())\n    });\n    DraftEffects.handleExtensionCausedError();\n  }\n\n  range.setStart(node, offset); // IE sometimes throws Unspecified Error when trying to addRange\n\n  if (isIE) {\n    try {\n      selection.addRange(range);\n    } catch (e) {\n      if (process.env.NODE_ENV !== \"production\") {\n        /* eslint-disable-next-line no-console */\n        console.warn('Call to selection.addRange() threw exception: ', e);\n      }\n    }\n  } else {\n    selection.addRange(range);\n  }\n}\n\nmodule.exports = {\n  setDraftEditorSelection: setDraftEditorSelection,\n  addFocusToSelection: addFocusToSelection\n};","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar ContentBlockNode = require(\"./ContentBlockNode\");\n\nvar generateRandomKey = require(\"./generateRandomKey\");\n\nvar Immutable = require(\"immutable\");\n\nvar invariant = require(\"fbjs/lib/invariant\");\n\nvar modifyBlockForContentState = require(\"./modifyBlockForContentState\");\n\nvar List = Immutable.List,\n    Map = Immutable.Map;\n\nvar transformBlock = function transformBlock(key, blockMap, func) {\n  if (!key) {\n    return;\n  }\n\n  var block = blockMap.get(key);\n\n  if (!block) {\n    return;\n  }\n\n  blockMap.set(key, func(block));\n};\n\nvar updateBlockMapLinks = function updateBlockMapLinks(blockMap, originalBlock, belowBlock) {\n  return blockMap.withMutations(function (blocks) {\n    var originalBlockKey = originalBlock.getKey();\n    var belowBlockKey = belowBlock.getKey(); // update block parent\n\n    transformBlock(originalBlock.getParentKey(), blocks, function (block) {\n      var parentChildrenList = block.getChildKeys();\n      var insertionIndex = parentChildrenList.indexOf(originalBlockKey) + 1;\n      var newChildrenArray = parentChildrenList.toArray();\n      newChildrenArray.splice(insertionIndex, 0, belowBlockKey);\n      return block.merge({\n        children: List(newChildrenArray)\n      });\n    }); // update original next block\n\n    transformBlock(originalBlock.getNextSiblingKey(), blocks, function (block) {\n      return block.merge({\n        prevSibling: belowBlockKey\n      });\n    }); // update original block\n\n    transformBlock(originalBlockKey, blocks, function (block) {\n      return block.merge({\n        nextSibling: belowBlockKey\n      });\n    }); // update below block\n\n    transformBlock(belowBlockKey, blocks, function (block) {\n      return block.merge({\n        prevSibling: originalBlockKey\n      });\n    });\n  });\n};\n\nvar splitBlockInContentState = function splitBlockInContentState(contentState, selectionState) {\n  !selectionState.isCollapsed() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'Selection range must be collapsed.') : invariant(false) : void 0;\n  var key = selectionState.getAnchorKey();\n  var blockMap = contentState.getBlockMap();\n  var blockToSplit = blockMap.get(key);\n  var text = blockToSplit.getText();\n\n  if (!text) {\n    var blockType = blockToSplit.getType();\n\n    if (blockType === 'unordered-list-item' || blockType === 'ordered-list-item') {\n      return modifyBlockForContentState(contentState, selectionState, function (block) {\n        return block.merge({\n          type: 'unstyled',\n          depth: 0\n        });\n      });\n    }\n  }\n\n  var offset = selectionState.getAnchorOffset();\n  var chars = blockToSplit.getCharacterList();\n  var keyBelow = generateRandomKey();\n  var isExperimentalTreeBlock = blockToSplit instanceof ContentBlockNode;\n  var blockAbove = blockToSplit.merge({\n    text: text.slice(0, offset),\n    characterList: chars.slice(0, offset)\n  });\n  var blockBelow = blockAbove.merge({\n    key: keyBelow,\n    text: text.slice(offset),\n    characterList: chars.slice(offset),\n    data: Map()\n  });\n  var blocksBefore = blockMap.toSeq().takeUntil(function (v) {\n    return v === blockToSplit;\n  });\n  var blocksAfter = blockMap.toSeq().skipUntil(function (v) {\n    return v === blockToSplit;\n  }).rest();\n  var newBlocks = blocksBefore.concat([[key, blockAbove], [keyBelow, blockBelow]], blocksAfter).toOrderedMap();\n\n  if (isExperimentalTreeBlock) {\n    !blockToSplit.getChildKeys().isEmpty() ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'ContentBlockNode must not have children') : invariant(false) : void 0;\n    newBlocks = updateBlockMapLinks(newBlocks, blockAbove, blockBelow);\n  }\n\n  return contentState.merge({\n    blockMap: newBlocks,\n    selectionBefore: selectionState,\n    selectionAfter: selectionState.merge({\n      anchorKey: keyBelow,\n      anchorOffset: 0,\n      focusKey: keyBelow,\n      focusOffset: 0,\n      isBackward: false\n    })\n  });\n};\n\nmodule.exports = splitBlockInContentState;","/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * \n * @emails oncall+draft_js\n */\n'use strict';\n\nvar NEWLINE_REGEX = /\\r\\n?|\\n/g;\n\nfunction splitTextIntoTextBlocks(text) {\n  return text.split(NEWLINE_REGEX);\n}\n\nmodule.exports = splitTextIntoTextBlocks;","\"use strict\";\n\n/**\n * Copyright 2004-present Facebook. All Rights Reserved.\n *\n * @typechecks\n * \n * @format\n */\n\n/*eslint-disable no-bitwise */\n\n/**\n * Based on the rfc4122-compliant solution posted at\n * http://stackoverflow.com/questions/105034\n */\nfunction uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0;\n    var v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n\nmodule.exports = uuid;"],"names":["BlockMapBuilder","ContentBlockNode","Immutable","insertIntoList","invariant","randomizeBlockMapKeys","List","insertFragment","contentState","selectionState","blockMap","fragment","targetKey","targetOffset","isTreeBasedBlockMap","first","newBlockArr","fragmentSize","size","target","get","head","tail","last","finalOffset","getLength","finalKey","getKey","shouldNotUpdateFromFragmentBlock","getChildKeys","isEmpty","forEach","block","blockKey","push","text","getText","chars","getCharacterList","headText","slice","headCharacters","appendToHead","merge","characterList","concat","type","getType","data","getData","updateHead","fragmentBlock","blockSize","length","tailText","tailCharacters","prependToTail","updateTail","updatedBlockMap","createFromArray","originalBlockMap","targetBlock","fragmentHeadBlock","withMutations","blockMapState","headKey","targetNextKey","getNextSiblingKey","targetParentKey","getParentKey","fragmentRootBlocks","rootBlock","rootBlocks","lastSiblingKey","getRootBlocks","lastRootFragmentBlockKey","setIn","originalTargetParentChildKeys","insertionIndex","indexOf","newChildrenKeysArray","toArray","splice","apply","updateBlockMapLinks","selectionBefore","selectionAfter","anchorKey","anchorOffset","focusKey","focusOffset","isBackward","module","exports","fragmentBlockMap","mergeBlockData","arguments","undefined","isCollapsed","getBlockMap","getStartKey","getStartOffset","newBlock","set","updateExistingBlock","targetListArg","toInsert","offset","targetList","count","c","reverse","unshift","toList","Repeat","characterMetadata","len","key","blockText","newOffset","node","ownerDocument","nodeType","Node","ELEMENT_NODE","value","isElement","nodeName","defaultView","HTMLElement","editorState","selection","getSelection","getAnchorKey","blockTree","getBlockTree","isAtStart","some","leafSet","leaf","leafStart","Keys","e","which","RETURN","getModifierState","EditorState","expandRangeToStartOfLine","getDraftEditorSelectionWithNodes","moveSelectionBackward","removeTextWithStrategy","afterRemoval","strategyState","getAnchorOffset","range","currentTarget","getRangeAt","endContainer","endOffset","startContainer","startOffset","getCurrentContent","DraftRemovableWord","getBlockForKey","toRemove","getBackward","moveSelectionForward","getForward","DraftModifier","splitBlock","endKey","getEndKey","textLength","forceSelection","startKey","UnicodeUtils","content","charBehind","getUTF16Length","charAhead","getContentStateFragment","removalRange","finalSelection","movedFragment","removeRange","getSelectionAfter","targetRange","afterInsert","replaceWithFragment","newEditorState","acceptSelection","updateFn","undoneState","undo","getLastChangeType","preventDefault","getNativelyRenderedContent","nativelyRenderedContent","setTimeout","Map","operation","newBlocks","toSeq","skipUntil","_","k","takeUntil","map","getNextDelimiterBlockKey","OrderedMap","transformBlock","func","originalBlockToBeMoved","originalTargetBlock","insertionMode","isExperimentalTreeBlock","isInsertedAfterTarget","originalBlockKey","originalTargetKey","originalParentKey","originalNextSiblingKey","originalPrevSiblingKey","getPrevSiblingKey","newParentKey","newNextSiblingKey","newPrevSiblingKey","blocks","parentChildrenList","children","nextSibling","prevSibling","newParentChildrenList","targetBlockIndex","newChildrenArray","parent","blockToBeMoved","blocksToBeMoved","blockMapWithoutBlocksToBeMoved","nextSiblingKey","nextDelimiterBlockKey","takeWhile","isBlockToBeMoved","hasNextSiblingAndIsNotNextSibling","doesNotHaveNextSiblingAndIsNotDelimiter","blocksBefore","v","blocksAfter","skip","slicedBlocks","blockBefore","getBlockBefore","toOrderedMap","blockAfter","getBlockAfter","maxDistance","keyBefore","getKeyBefore","getKeyAfter","generateRandomKey","lastRootBlock","newKeysRef","index","oldKey","nextKey","prevKey","childrenKeys","parentKey","childKey","filter","child","randomizeContentBlockNodeKeys","randomizeContentBlockKeys","CharacterMetadata","findRangesImmutable","removeForBlock","entityMap","charBefore","charAfter","entityBeforeCursor","getEntity","entityAfterCursor","__get","getMutability","current","_getRemovalRange","characters","entityKey","a","b","element","start","end","getRemovalRange","applyEntity","getEntityMap","updatedBlocks","startBlock","updatedStart","getEndOffset","endBlock","updatedEnd","Object","keys","getAncestorsKeys","parents","blockNode","getNextValidSibling","nextValidSiblingKey","getPrevValidSibling","prevValidSiblingKey","nextDelimiters","nextDelimiter","_block","getNextDelimitersBlockKeys","delimiterKey","prevSiblingKey","newParent","find","removeFromList","shift","pop","parentAncestors","endBlockchildrenKeys","endBlockAncestors","modifiedStart","experimentalTreeDataSupport","gkx","strategy","direction","getFocusKey","anchorBlock","isSelectionAtEndOfContent","anchorBlockSibling","isSelectionAtStartOfContent","REGEX_BLOCK_DELIMITER","RegExp","input","replace","DraftEffects","DraftJsDebugLogging","UserAgent","containsNode","getActiveElement","getCorrectDocumentFromNode","isIE","isBrowser","getAnonymizedDOM","getNodeLabels","anonymized","anonymizeTextWithin","TEXT_NODE","textContent","outerHTML","labels","createTextNode","join","clone","cloneNode","setAttribute","childNodes","ii","appendChild","getAnonymizedEditorDOM","currentNode","castedNode","hasAttribute","parentNode","getNodeLength","nodeValue","addFocusToSelection","activeElement","extend","logSelectionStateFailure","anonymizedDom","extraParams","JSON","stringify","toJS","nodeWasFocus","focusNode","rangeCount","n","anchorNode","activeElementName","nodeIsFocus","selectionRangeCount","selectionAnchorNodeName","selectionAnchorOffset","selectionFocusNodeName","selectionFocusOffset","message","setEnd","addRange","cloneRange","addPointToSelection","createRange","handleExtensionCausedError","setStart","setDraftEditorSelection","nodeStart","nodeEnd","documentObject","documentElement","getFocusOffset","getIsBackward","tempKey","tempOffset","hasAnchor","hasFocus","removeAllRanges","storedFocusNode","storedFocusOffset","modifyBlockForContentState","blockToSplit","blockType","depth","keyBelow","blockAbove","blockBelow","rest","originalBlock","belowBlock","belowBlockKey","NEWLINE_REGEX","split","r","Math","random","toString"],"sourceRoot":""}